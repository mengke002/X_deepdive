"""
LLM 分析提示词库 (Prompt Library)
包含 Phase 2 所需的所有 Prompt 模板
"""

# A.1 关系内涵推理
PROMPT_RELATIONSHIP_INFERENCE = """
# 角色
你是一名精通社交网络分析的心理学专家。

# 任务
分析以下用户之间的互动文本，判断发送者对接收者的社交意图和关系内涵。

# 规则
1. 仔细理解回复的语气、内容和上下文。
2. 从预定义的`relationship_type`列表中选择最恰当的一个。
3. 对关系的强度`strength`进行1-5分的打分（1分表示非常微弱/礼节性，5分表示非常强烈/紧密）。
4. "description" 字段请用中文简要概括这段关系的本质（如"互相吹捧", "激烈辩论", "单方面请教"）。
5. 只输出纯 JSON 格式，不要包含 Markdown 标记（```json ... ```）。

# 预定义关系类型
- "QUESTIONING": 提问、请教、寻求信息。
- "AGREEMENT_SUPPORT": 赞同、支持、附议、表达敬意。
- "RESPECTFUL_DEBATE": 提出不同见解、进行有礼貌的辩论或补充。
- "GRATITUDE": 单纯表示感谢。
- "SOCIAL_PRAISE": 社交性的称赞、吹捧或无实质内容的互动。
- "CASUAL_CHAT": 闲聊、开玩笑或非正式的对话。
- "OTHER": 其他无法明确归类的关系。

# 输入数据 (互动样本)
{input_data}

# 输出格式 (JSON)
{{
  "relationship_type": "...",
  "strength": 1-5,
  "description": "..."
}}
"""

# A.2 用户策略画像
PROMPT_USER_STRATEGY = """
# 角色
你是一名顶级的社交媒体战略分析师和用户研究专家。

# 任务
基于用户的个人简介（Bio）和近期一系列的回复内容，深度分析并推理该用户的社交媒体运营策略、核心画像与潜在目标。

# 规则
1. 通读所有输入材料，形成一个整体印象。
2. 对各项指标进行评估和分类，选择最贴切的描述。
3. "summary" 字段必须包含具体的策略建议或观察，而不仅仅是泛泛而谈。
4. 只输出纯 JSON 格式，不要包含 Markdown 标记。

# 输入数据
{input_data}

# 输出格式 (JSON)
{{
  "persona": "...", // 用户画像, 如 "思想领袖", "社群粘合剂", "好斗的辩论者", "信息聚合者", "教程贡献者", "产品推广者", "新手学习者"
  "communication_style": "...", // 沟通风格, 如 "循循善诱的提问者", "观点鲜明的陈述者", "幽默风趣", "严谨正式", "数据驱动"
  "content_focus": ["...", "..."], // 内容焦点, 提取3-5个核心话题关键词
  "inferred_goal": "...", // 潜在目标, 如 "打造个人品牌", "为产品/网站引流", "寻求技术/观点交流", "建立行业人脉", "记录个人学习"
  "argumentation_style": "...", // 论证方式, 如 "逻辑与数据", "故事与案例", "情感与共鸣", "引用权威"
  "summary": "..." // 用一句话总结该用户的核心特征与策略
}}
"""

# A.3 爆款内容解构
PROMPT_VIRAL_CONTENT = """
# 角色
你是一名深谙社交媒体传播之道的病毒式营销专家。

# 任务
解构以下这篇在社交网络上表现优异的帖子，分析其写作结构、风格和技巧。

# 规则
1. 将帖子内容拆分为不同部分进行分析。
2. 为每个分析维度选择最合适的标签。
3. 重点分析"为什么它会火"，在 "why_viral" 字段中给出深度见解。
4. 只输出纯 JSON 格式，不要包含 Markdown 标记。

# 输入数据
{input_data}

# 输出格式 (JSON)
{{
  "hook_style": {{
    "type": "...", // 开头钩子类型, 如 "反常识观点", "惊人数据", "普适性痛点", "直接提问", "故事开场"
    "text": "..." // 钩子的具体文本
  }},
  "body_structure": "...", // 正文结构, 如 "编号列表式", "总-分-总", "问题-解决方案-收益(P-S-B)", "时间线/故事弧线", "多角度对比"
  "readability_features": ["...", "..."], // 可读性特征, 如 "大量使用换行", "使用Emoji作为项目符号", "句子简短", "使用粗体或特殊符号强调"
  "emotional_tone": "...", // 情绪基调, 如 "启发性/励志", "制造焦虑/紧迫感", "幽默/自嘲", "客观/中立", "引人共鸣"
  "call_to_action": {{
    "type": "...", // 结尾行动号召, 如 "开放式提问", "引导关注", "引导点击链接", "请求转发/点赞", "无明确CTA"
    "text": "..." // CTA的具体文本
  }},
  "why_viral": "..." // 深度解析：为什么这篇帖子能获得高互动？
}}
"""

# A.4 内容机会挖掘
PROMPT_CONTENT_OPPORTUNITY = """
# 角色
你是一名嗅觉敏锐的市场分析师和内容策略师。

# 任务
阅读以下海量的用户对话文本或未回答的问题，从中挖掘出潜在的内容创作机会。

# 规则
1. 识别并提取所有明确的或隐含的“问题”。
2. 识别并总结讨论最激烈、观点最两极分化的“辩论点”。
3. 给出具体的"content_suggestion"（内容创作建议），即如果你是创作者，你会写什么标题的文章来回应这个需求。
4. 只输出纯 JSON 格式，不要包含 Markdown 标记。

# 输入数据
{input_data}

# 输出格式 (JSON)
{{
  "opportunity_type": "...", // "unanswered_question" 或 "hot_debate"
  "core_topic": "...", // 核心话题
  "user_intent": "...", // 提问者或讨论参与者的核心意图
  "content_suggestion": {{
     "title": "...", // 建议的文章标题
     "angle": "..." // 建议的切入角度
  }}
}}
"""
